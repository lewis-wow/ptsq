# Client

The client is a Javascript `Proxy` object.
It has only a `noop` function in the proxy and anything else.

```ts
const noop = () => {};
```

But you cannot call the function, because Typescript cast that type of the `Proxy` client into something like `PsqlClient<BaseRouter>`.

## Proprietary client

```ts title="client.ts"
import { createProxyClient } from '@ptsq/client';

/**
 * non introspcted or generated file, just type of server router
 */
import type { BaseRouter } from './server';

const client = createProxyClient<BaseRouter>({
  url: 'http://localhost:4000/ptsq',
});

const result = await client.test.query({
  name: /* string */ 'John',
});
```

## Introspected schema

Even if this is not directly the server router schema, it is introspected, the way you define client stays the same, client does not care if the server is in your repository or somewhere remote.

```ts title="client.ts"
import { createProxyClient } from '@ptsq/client';

/**
 * introspcted or generated file, no server exposed, ready for open api
 */
import type { RootRouter } from './schema.generated';

const client = createProxyClient<RootRouter>({
  url: 'http://localhost:4000/ptsq',
});

const result = await client.test.query({
  name: /* string */ 'John',
});
```

## Options

```ts
type CreateProxyClientArgs = {
  url: string;
  credentials?: boolean;
  headers?: RequestHeaders | (() => MaybePromise<RequestHeaders>);
};
```

```ts title="client.ts"
import { createProxyClient } from '@ptsq/client';
import type { BaseRouter } from './server';

const client = createProxyClient<BaseRouter>({
  url: 'http://localhost:4000/ptsq',
  headers: async () => {
    const jwt = await cookies.get('jwt');

    return {
      Authorization: `Bearer ${jwt}`,
    };
  },
  credentials: true,
});

const result = await client.test.query({
  name: /* string */ 'John',
});
```
